# 2022년 신한금융그룹 빅데이터 해커톤


## 신한카드 ESG로 미래세대와 소통하다


> 2022.09.15. (목) - 2022.10.07. (금) 
신한금융그룹 빅데이터 해커톤 데이터 분석 트랙
우수상 수상

팀 숙데콘(숙명데이터유니콘) 
강수연, 김세은, 임다미
> 


**📂 분석 배경과 목표**

- **미래세대 정의**
    
    *“**MZ 세대 뿐 아니라 다가올 미래에 적응하고 새로운 삶을 실현해 나갈 모든 세대”***
    
- **미래세대를 위한 사업 방향성과 신한카드의 실용적 문제 해결을 위한 솔루션 고안**
    - 다가올 미래에 적응하는 미래세대에 발맞춰 미래 세대와 공생관계에 있는 기업 또한 미래를 대비하는 경영, 지속가능한 경영을 지향해야한다고 판단함. 따라서 ESG 지수를 높일 수 있는 사업을 고안함.
    ⇒ 내부통제를 위한 고객 신용 리스크 예측 서비스
    - 신한 Play를 직접 이용하며 느꼈던 아쉬운 점을 보완하기 위한 실용적인 솔루션을 고안함.
    ⇒ 플랫폼 통합을 통한 고객 맞춤형 서비스


📂 **사업 요약**

- **비용 절감 측면의 고객 신용 리스크 관리 서비스 제안**
    
    **💡데이터 기반의 내부통제 사업 기획**
        
- **새로운 가치 창출을 위한 신한 Play 확장 서비스 제안**
    
    💡**데이터 기반의 플랫폼 통합 사업 기획**
        
    | 고객의 소비 유형에 따라 개별 고객의 소비 패턴을 발견한다. |
    | --- |
    | 각 소비 패턴에서 고객의 니즈를 파악하고 그를 충족시킬 수 있는 맞춤형 서비스를 제안한다. |
    | * 맞춤형 서비스 : 개인화한 고객의 소비 패턴에 맞는 제휴 쇼핑몰 추천, 펀드 추천, 신한 플랫폼 추천 서비스 |
    
    | 신한 금융 지주사의 모든 플랫폼 통합 |
    | --- |
    | - 궁극적으로 신한 PLAY를 중심으로 신한 올댓 쇼핑, My Car, 신한 알파, 신한라이프 등의 신한 금융 지주사의 모든 플랫폼을 통합한다.
    - 신한카드에서 모든 신한 금융 계열사로 서비스를 확장한다.  |
            

**📂 분석 요약**

| 카이제곱 독립성 검정 | 연령대 변수가 신용 위험수준 변수에 영향을 미친다는 가설 검정 |
| --- | --- |
| 이항 로지스틱 회귀분석 | 고객의 신용 위험도 관련된 산업 변수 추출 |
| 의사결정 분류나무 | 신용카드 리볼빙* 대금의 채무불이행 고객의 특성 예측 모델링 *) 카드대금 일부 이월결제약정 |
| K-means 군집분석 | 신용카드 이용건수 및 결제금액에 따른 소비성향이 유사한 고객 군집 8가지 형성 (VIP 여부에 따른 사전 분류) |
| Apriori 연관규칙분석 | 8가지 고객 군집별 26개의 결제지출이 있는 산업 중 연관규칙이 있는 산업 집합 추출 |


# 목차


| 목차 | 내용 |
| --- | --- |
| 1. 데이터 수집과 전처리 | 시각화를 통한 이상치 파악 및 파생변수 생성을 통한 데이터 전처리 |
| 2. 데이터 분석 결과 | 의사결정나무 기반의 내부 통제 강화 모델 제시, 장바구니 분석을 통한 고객 소비 패턴 도출 및 활용 |
| 3. 총평 | 프로젝트 수행 시 발생한 문제점 및 해결 과정, 프로젝트 한계점 및 개선 계획, 업무 분담 및 프로젝트 소감 |


# 1. 데이터 수집과 전처리


**📂 데이터 수집**

| 데이터 명 | 출처 | 내용 |
| --- | --- | --- |
| data_007.csv | 신한카드 | - 총 473,225명의 고객 데이터 - 고객정보 7개 변수 - 결제정보 168개 변수 - 거래패턴코드 6개 변수 - 세부 사항은 보안상 공개불가 |


**📂 데이터 전처리**

- 데이터 결측값 및 이상치 처리
    - 결측값 처리 기준
        
        모르는 값(NULL)이 아니라 고객이 해당 소비항목에 대한 지출을 하지 않았다는 의미로 결측값을 제거하거나 대체하지 않음. 
        
    - 이상치 처리 기준
        
        이상치라고 판정할 수 있는 수준의 결제금액이 높은 고객의 소비지출 데이터를 제거하는 것은 기획의 취지에 맞지 않기 때문에 제거하거나 대체하지 않음. 
        
    - 해결과정
        
        각 소비지출항목의 결제금액을 동일 산업별로 합산함. 즉, 산업코드 변수 26개 생성하여 결측값(0)을 최소화함.
        
- 파생변수 생성
    - 신용카드사의 여신금융서비스 이용 여부에 대한 패턴코드의 파생변수를 생성한 이유
        
        연간 월별 거래 서비스 이용 여부(0, 1)에 따른 요약 변수 형태의 원본 데이터를 분석 목적*과 편의를 위해 새로운 **거래 위험등급 변수** 파생함. 
        *)신용 리스크 있는 고객 관리 목적
        
    - 해결과정
        
        각 패턴코드 변량(value)의 1(서비스 이용한 경우)의 개수를 추출하는 방식을 고안함. 카드 리볼빙 서비스를 12개월 중 3개월 이상 연속으로 이용한 고객을 초고위험 등급으로 설정함.
        
        - 거래 이용횟수 연속적으로 연 3회 이상 : HH등급(high risk high level)
        
        - 거래 이용횟수 불연속적으로 연 3회 이상 : HL등급(high risk low level)
        
        - 거래 이용횟수 연 1회 ~ 2회 : L등급(low risk)
        
        - 거래 이용횟수 연 0회 : N등급(no risk)
        
        카드 리볼빙은 익월로 대금을 이월하더라도 최소결제금액을 납부하지 않을 경우 연체로 처리되고 신용점수가 내려갈 수 있음. 
        
        90일 연체 시 신용등급이 8 ~ 9등급으로 하락하고 이른바 신용불량자*로 확정됨. 금융거래가 제한된다는 점에서 상기된 기준으로 거래 위험등급 파생변수 생성함.
        
        *) 금융거래 등 상거래에서 발생한 대금 또는 대출금 등의 채무에 대하여 정당한 사유 없이 약정된 기일 내에 변제를 이행하지 아니한


# 2. 결론


**📂 결론**

**“*고객 신용 리스크 관리 서비스 : 의사결정나무 기반의 내부 통제 강화 모델 제시”***

“***플랫폼 통합을 통한 고객 맞춤형 서비스 : 장바구니 분석을 통한 고객 소비 패턴 도출 및 활용”***


**📂 의사결정 분류나무 기반의 신용 리스크 발생 고객의 특성 예측**

| 카드이월대금을 상환하지 않는다고 예측된 고객 특성 | 취급금액, 이용건수, 신한카드 VIP 여부 및 주유소, 손해보험료 결제금액이 일정수준보다 높은 고객 |
| --- | --- |
| 리볼빙을 연간 3회 이상 연속으로 이용하며, 1회당 100만 원 이상 이용하는 고객의 거래패턴 | 월 1회 이상 현금서비스 (카드단기대출) 이용하는 경향 장기론 (카드장기대출) 이용률 저조, 할 금융 서비스 이용률 전무 |
| 신용 리스크 관리 서비스 기대효과 | 사업 보고서 및 지속가능경영(ESG) 보고서 작성 시 빅데이터를 이용한 리볼빙 채무불이행에 대한 예측 수행
보다 정확한 대손 충당금 규모를 설정하고 적립함으로써 비용을 절감하고 수익을 증가시키는 효과
주주, 채권자, PEF 등 이해관계자에 대하여 정확한 정보를 제공하여 지배구조 (G sector) 지수를 향상 |


**📂 연관규칙분석 기반의 산업간 집합 분류**

| 군집분석 및
연관규칙분석 기반의
서비스 | 신한 Play에서 고객의 소비 패턴에 맞는 신한 플랫폼과 제휴쇼핑몰을 추천하여 분산되어 있던 앱 연결성과 앱 활용도를 높이는 서비스
기획한 신사업에 대한 예시 하단에 기재 |
| --- | --- |
| VIP 집단 중 샌드위치 유형

(이용건수와 취급금액이 
모두 중간인 군집)

(외출 시 외식을 자주 하는 집단으로 판단)
 | - 소비유도
신한카드 종합생활금융 플랫폼, 신한 Play의 프리미엄 쿠폰 추천
예) VIP 집단으로 다이닝 위주 레스토랑 추천

- 투자유도
문화예술, 외식 산업을 영위하는 회사의 주식 종목이
포함된 펀드 추천 → 신한투자증권 알파 앱으로 연동
예) 신한 K-컬쳐 증권 자투자신탁 (K-이커머스, 헬스케어, 미디어) |
| 신한카드 결제플랫폼
(신한 Play) 확장 서비스
기대효과 | 고객의 라이프사이클 내 점유시간을 늘리고 이익 창출까지의
과정을 유도

ESG 산업 관련 가치 소비를 선호하는 미래세대의 선택의 폭을 
확장하여 친환경 소비를 유도하고 환경 (E sector) 지수를 향상 |


# 3. 총평


📂 **프로젝트 수행 시 발생한 문제점 및 해결 과정**

| 문제점 발생 지점 | 내용 |
| --- | --- |
| 데이터 전처리 시
데이터 확인 과정 | [문제]
데이터 확인 시, 데이터의 패턴코드(E1~E6)이 월간 거래 서비스 이용 
여부에 대한 요약변수 형태(12개월)로 제시되었음.

[해결과정]
 : 파생변수 생성
• nE1~nE6 변수를 생성
- 연간 이용 횟수를 보기 위해서 각 패턴코드 중 ‘1(이용)’의 개수를 추출
- 모든 변수를 일일이 이항 변수로 추출하기에는2^(12*473225)*6 의 
경우의 수가 발생하기 때문에 시간 복잡도 측면에서 비효율적이라고 
판단

• sE1 변수 생성
- E1(리볼빙 이용 여부)에서 ‘1(이용)’이 연속으로 3번 이상인 고객을 True, 아닌 고객을 False로 나타내는 변수

• G1 변수 생성
- 리볼빙 이용 횟수에 따른
- nE1 == 0 ~ "N",
- nE1 <= 2 ~ "L",
- nE1 <= 12 & sE1 == FALSE ~ "HL",
- sE1 == TRUE ~ "HH” |
| 고객 성향 분석 시
군집분석 과정 | [문제]
• K-medoids 군집분석은 결제금액 변수의 0(결측)이 너무 많아 
군집의 대푯값이 0으로 도출되어 모델 활용 불가능함.
• 계층적 군집분석은 빅데이터로 n의 크기가 커서 일반적으로 
시간복잡도가 O(n의 세제곱) 높은 문제 발생함.

[해결과정]
• K-means 군집분석을 이용하여 고객 소비지출 성향 분석 수행하여 
시간복잡도를 O(nlogn)으로 개선함.
• 신용카드 이용건수 및 결제금액이 이상치라고 판단될 정도로 
소비 규모가 높은 군집을 찾기 위해 K-means 군집분석이 적합함. |
| 고객 소비 패턴 분석 시
분석 방법 선택 과정 | [문제]
고객의 소비 패턴을 분석한 후 각각의 소비 패턴을 가진 고객에게 
맞춤형 서비스를 추천하는 모델을 만들고자 했으나 
네트워크 분석과 연관성 분석 중 모델 결정에 시행착오를 겪음.

[해결과정]
• 네트워크 분석
- 네트워크 분석은 빈도를 기준으로 인접 노드를 형성함.
- 따라서 결제 금액이 있을 경우를 ‘1’로 설정함.
- 하지만 산업마다 소비지출항목의 수가 상이하기 때문에 빈도 
기준으로 추천 알고리즘을 설정하기에는 적합한 모델이 아니라고 
판단함.
- 표준화를 하게 되면 빈도가 1 미만으로 작아지기 때문에 결과를 
확인하기 어려울 것으로 판단함.
* 데이터 커서 모델 구현이 어려움

• 연관 분석
- 고객의 연속적인 소비를 통해  소비 패턴을 도출하는 것이 
적합하다고 판단함.
- 데이터 분석을 통해 범용적인 지출 이외의 새로운 연관 규칙을 찾고,
해당 규칙을 이용하여 맞춤형 서비스를 제안하는 것이 적합하다고 
판단함. |


📂 **프로젝트 한계점 및 개선 계획**

| 이항 로지스틱 회귀분석
모형 적합을 위한 
성능 평가 미흡 | [한계점]
이항 로지스틱 회귀분석 성능 평가 시 ANOVA 검정을 진행하였지만 
검정 결과를 반영한 성능 개선에 미흡함.
* 추출한 산업이 검정력을 크게 증가시키진 못한다고 결과가 나옴.

[개선 계획]
• 이탈도 결정계수 및 수정된 이탈도 결정계수 측정함.
• 독립변수(산업항목) 간 다중공선성 파악함.
• 모형에 영향력 있는 변수 내림차순 시각화함.
• 혼동행렬로 오분류율(제1, 2종 오류 이른바 오차비용), F1 등으로 
모형 적합을 위한 성능 평가. |
| --- | --- |
| Apriori 알고리즘의
시간복잡도 문제 | [한계점]
• 연관규칙분석에 이용한 Apriori 알고리즘의 지수형 시간복잡도 
O(2의 n제곱) 문제을 해결하고자 알고리즘 개선 시도하였으나 미흡함.
• 1개월 간 수십만 명의 고객 데이터에서 100명 표본을 추출하여 모델링함. 시계열이 단기이며 고객 수가 많았다는 점에서 한계가 있다는 결론을 내림.

[개선 계획]
• 연관규칙분석의 시간복잡도를 O(n)까지 내려야 보조기억장치가 아닌
주기억장치에 데이터가 올라갈 수 있다는 점에서 보완 필요함.
• Frequent Pattern Growth 알고리즘으로 연관규칙분석 개선 필요함. |


📂 **업무 분배**

| 팀원 | 업무 |
| --- | --- |
| 강수연 | 데이터 전처리, 의사결정나무, 의사결정나무 성능평가, 연관규칙분석, 시스템 구현(신사업 기획) |
| 김세은 | 데이터 전처리, 군집분석, 이항로지스틱 회귀분석, 연관규칙분석, 시스템 구현(신사업 기획) |

 ****


📂 **프로젝트 소감**

강수연

• 데이터 분석 프로젝트의 목표 달성에 필요한 3가지 역량 파악 및 활용 
    1. 데이터 분석 결과를 해석하여 실제 비즈니스에서 문제를 해결하는 실용성 (그로스 해킹) 
    2. 머신러닝 모델 적합(fitting)을 위한 성능 평가지표 우선순위 결정의 중요성
    3. 머신러닝 모델이 실용적인 시간 안에 구현될 수 있도록 알고리즘의 시간복잡도(BigO)에 대한 피드백의 필요성

• 데이터 분석 협업 과정에서 얻은 의사 전달력
    1. 팀원들 간 프로젝트 관련 요구사항을 명확하게 전달하기 위한 고민과 프로젝트가 얼마나 진행되었는지 중간보고를 철저히 함
    2. 타인에게 사업 아이디어를 피칭할 때 모든 이해관계자에게 공유 가능할 수준의 직관적인 전달력에 대한 협의

김세은 

• 데이터 분석 과정에서 얻은 역량 및 개선점 
    1. 실제 고객 데이터를 가지고 데이터 분석부터 신사업 기획까지 모든 과정에 주도적으로 참여하면서 데이터 기반의 의사결정 역량을 키움.
    2. 새롭게 배운 점과 앞으로 공부해야 할 점을 알게 됨.
    - Apriori 알고리즘의 시간분석도(BigO)에 대한 개선의 필요성
    - 분석 모델링 성능평가의 중요성
    - 머신러닝과 알고리즘 공부가 필요함
    
• 데이터 분석 협업 과정에서 얻은 의사소통 역량
    1. 내가 해석한 분석 결과를 팀원들에게 설명하는 과정에서 어떻게 하면 더 쉽게 의미를 전달할지 고민함으로써 전달력과 표현법을 배움.
    2. 최종 사업 아이디어를 실무진에게 피칭할 때 본 프로젝트의 목표 달성 과정을 효과적으로 전달하기 위해서 사업의 배경, 방향성, 분석 과정, 도출한 인사이트, 인사이트를 활용한 사업 설명 순으로 구조화하여 전달하는 스토리텔링 능력을 키움.

